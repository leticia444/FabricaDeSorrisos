@model FabricaDeSorrisos.Web.Models.CatalogViewModel
@{
    ViewData["Title"] = "Bem-vindo à Fábrica";
}

@* Carrossel que ocupa toda a largura da tela (100%) *@
<div id="carouselHome" class="carousel slide shadow-sm" data-bs-ride="carousel" data-bs-interval="4000">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselHome" data-bs-slide-to="0" class="active"></button>
        <button type="button" data-bs-target="#carouselHome" data-bs-slide-to="1"></button>
        <button type="button" data-bs-target="#carouselHome" data-bs-slide-to="2"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="~/img/caroussel1.png" class="d-block w-100" alt="Destaque 1">
        </div>
        <div class="carousel-item">
            <img src="~/img/caroussel2.jpg" class="d-block w-100" alt="Destaque 2">
        </div>
        <div class="carousel-item">
            <img src="~/img/caroussel3.jpg" class="d-block w-100" alt="Destaque 3">
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselHome" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselHome" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </button>
</div>

<div class="container">
    @* Seção de Categorias *@
    <div class="row justify-content-center text-center g-4 mb-5">
        <div class="col-6 col-md-2">
            <a asp-action="Busca" asp-route-categoriaId="1" class="text-decoration-none">
                <div class="cat-card bg-pink shadow-sm hover-scale">
                    <img src="https://cdn-icons-png.flaticon.com/512/3082/3082060.png" width="50" alt="Pato">
                    <span class="d-block fw-bold text-white mt-2">BRINQUEDOS</span>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-2">
            <a asp-action="Busca" asp-route-categoriaId="2" class="text-decoration-none">
                <div class="cat-card bg-cyan shadow-sm hover-scale">
                    <img src="https://cdn-icons-png.flaticon.com/512/3938/3938661.png" width="50" alt="Blocos">
                    <span class="d-block fw-bold text-white mt-2">EDUCATIVOS</span>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-2">
            <a asp-action="Busca" class="text-decoration-none">
                <div class="cat-card bg-yellow shadow-sm hover-scale">
                    <img src="https://cdn-icons-png.flaticon.com/512/2219/2219694.png" width="50" alt="Torre">
                    <span class="d-block fw-bold text-white mt-2">POR IDADE</span>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-2">
            <a asp-action="Busca" asp-route-categoriaId="4" class="text-decoration-none">
                <div class="cat-card bg-green shadow-sm hover-scale">
                    <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" width="50" alt="Pet">
                    <span class="d-block fw-bold text-white mt-2">PETS</span>
                </div>
            </a>
        </div>
        <div class="col-6 col-md-2">
            <a asp-action="Busca" asp-route-categoriaId="3" class="text-decoration-none">
                <div class="cat-card bg-navy shadow-sm hover-scale">
                    <img src="https://cdn-icons-png.flaticon.com/512/1435/1435728.png" width="50" alt="Jogos">
                    <span class="d-block fw-bold text-white mt-2">JOGOS</span>
                </div>
            </a>
        </div>
    </div>

    @* Banner do Jogo *@
    <div class="card border-0 rounded-4 overflow-hidden mb-5 shadow text-white game-banner">
        <div class="card-body p-5 text-center position-relative">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-8">
                    <h2 class="fw-bold display-6 mb-3 text-shadow">Enquanto organiza a fábrica,<br>o ursinho Fabrício conta com sua ajuda!</h2>
                    <p class="fs-5 mb-4 text-shadow">Cada acerto cria um sorriso. Ganhe descontos exclusivos no final! 🐻✨</p>
                    <button class="btn btn-warning btn-lg rounded-pill fw-bold px-5 shadow-lg hover-scale text-uppercase text-primary">
                        <i class="bi bi-controller me-2"></i> Jogar Agora
                    </button>
                </div>
            </div>
        </div>
    </div>

    @* Marcas *@
    <div class="mb-5 text-center">
        <h3 class="fw-bold mb-4 text-secondary">Nossas Marcas Favoritas</h3>
        <div class="d-flex justify-content-center flex-wrap gap-4">
            <a asp-action="Busca" asp-route-marcaId="1" class="text-decoration-none hover-scale">
                <div class="bg-white rounded-circle shadow-sm p-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/LEGO_logo.svg/1024px-LEGO_logo.svg.png" class="img-fluid" alt="Lego">
                </div>
            </a>
            <a asp-action="Busca" asp-route-marcaId="2" class="text-decoration-none hover-scale">
                <div class="bg-white rounded-circle shadow-sm p-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b2/Mattel_logo.svg" class="img-fluid" alt="Mattel">
                </div>
            </a>
            <a asp-action="Busca" asp-route-marcaId="3" class="text-decoration-none hover-scale">
                <div class="bg-white rounded-circle shadow-sm p-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Hasbro_Logo.svg/1200px-Hasbro_Logo.svg.png" class="img-fluid" alt="Hasbro">
                </div>
            </a>
            <a asp-action="Busca" asp-route-marcaId="4" class="text-decoration-none hover-scale">
                <div class="bg-white rounded-circle shadow-sm p-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Fisher-Price_logo.svg/2560px-Fisher-Price_logo.svg.png" class="img-fluid" alt="Fisher">
                </div>
            </a>
            <a asp-action="Busca" asp-route-marcaId="5" class="text-decoration-none hover-scale">
                <div class="bg-white rounded-circle shadow-sm p-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px;">
                    <img src="https://upload.wikimedia.org/wikipedia/pt/e/ee/Logotipo_Estrela.png" class="img-fluid" alt="Estrela">
                </div>
            </a>
        </div>
    </div>

    @* Produtos *@
    <div class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold text-dark border-start border-5 border-primary ps-3">Destaques da Semana</h3>
            <a asp-action="Busca" class="btn btn-outline-primary rounded-pill">Ver Todos</a>
        </div>

        <div class="row row-cols-1 row-cols-md-3 g-4">
            @if (Model.Produtos != null && Model.Produtos.Items.Any())
            {
                @foreach (var item in Model.Produtos.Items.Take(6))
                {
                    <div class="col">
                        <div class="card h-100 shadow-sm border-0 position-relative hover-card rounded-4 overflow-hidden">
                            <div class="position-relative text-center p-4 bg-light">
                                <a asp-controller="Home" asp-action="Detalhes" asp-route-id="@item.Id" class="d-block text-decoration-none">
                                    <img src="@(item.ImagemUrl ?? "https://placehold.co/200?text=Sem+Foto")"
                                         class="img-fluid transition-scale" alt="@item.Nome"
                                         style="height: 180px; object-fit: contain;">
                                </a>

                                <button class="btn btn-light rounded-circle position-absolute top-0 end-0 m-3 shadow-sm btn-favorito"
                                        onclick="toggleFavorito(this, @item.Id)"
                                        data-auth="@User.Identity.IsAuthenticated.ToString().ToLower()">
                                    <i class="bi bi-heart fs-5 text-secondary"></i>
                                </button>
                            </div>

                            <div class="card-body d-flex flex-column text-center">
                                <a asp-controller="Home" asp-action="Detalhes" asp-route-id="@item.Id" class="text-decoration-none text-dark">
                                    <h5 class="card-title text-truncate fw-bold mb-1">@item.Nome</h5>
                                </a>

                                <div class="mb-3">
                                    <span class="badge bg-secondary bg-opacity-10 text-secondary">@item.Marca</span>
                                </div>

                                <div class="mt-auto">
                                    <h4 class="fw-bold text-primary mb-3">R$ @item.Preco.ToString("N2")</h4>

                                    @if (item.Estoque > 0)
                                    {
                                        <button class="btn btn-success w-100 rounded-pill fw-bold shadow-sm hover-scale"
                                                onclick="adicionarAoCarrinho(this, @item.Id)">
                                            <i class="bi bi-cart-plus me-1"></i> Comprar
                                        </button>
                                    }
                                    else
                                    {
                                        <button class="btn btn-secondary w-100 rounded-pill disabled">Esgotado</button>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>

<style>
    /* Estilos das Categorias */
    .cat-card {
        border-radius: 20px;
        padding: 20px 10px;
        transition: transform 0.2s;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .bg-pink {
        background-color: #ff69b4;
    }

    .bg-cyan {
        background-color: #00bfff;
    }

    .bg-yellow {
        background-color: #ffd700;
    }

    .bg-green {
        background-color: #32cd32;
    }

    .bg-navy {
        background-color: #000080;
    }

    /* Banner do Jogo */
    .game-banner {
        background: linear-gradient(135deg, #fce38a 0%, #f38181 100%);
    }

    .text-shadow {
        text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    }

    /* Efeitos */
    .hover-scale {
        transition: transform 0.2s;
    }

        .hover-scale:hover {
            transform: scale(1.05);
        }

    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
    }

    .transition-scale {
        transition: transform 0.3s ease;
    }

    .hover-card:hover .transition-scale {
        transform: scale(1.1);
    }
</style>